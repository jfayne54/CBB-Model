- name: Commit and push (with auto-merge)
  run: |
    git config user.name "github-actions[bot]"
    git config user.email "github-actions[bot]@users.noreply.github.com"

    git add .

    # Skip commit if no changes
    if git diff --cached --quiet; then
      echo "No changes â€” skipping commit"
      exit 0
    fi

    git commit -m "Update Torvik teamstats"

    # Pull latest changes to avoid push rejection
    git pull --rebase origin main

    # Now push safely
    git push origin main
